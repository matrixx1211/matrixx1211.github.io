import{a4 as g,r as I}from"./index-qDtQ62_f.js";const w={some:0,all:1};function p(t,n,{root:r,margin:u,amount:s="some"}={}){const a=g(t),o=new WeakMap,f=c=>{c.forEach(e=>{const l=o.get(e.target);if(e.isIntersecting!==!!l)if(e.isIntersecting){const d=n(e.target,e);typeof d=="function"?o.set(e.target,d):i.unobserve(e.target)}else typeof l=="function"&&(l(e),o.delete(e.target))})},i=new IntersectionObserver(f,{root:r,rootMargin:u,threshold:typeof s=="number"?s:w[s]});return a.forEach(c=>i.observe(c)),()=>i.disconnect()}function E(t,{root:n,margin:r,amount:u,once:s=!1,initial:a=!1}={}){const[o,f]=I.useState(a);return I.useEffect(()=>{if(!t.current||s&&o)return;const i=()=>(f(!0),s?void 0:()=>f(!1)),c={root:n&&n.current||void 0,margin:r,amount:u};return p(t.current,i,c)},[n,t,r,s,u]),o}function v(t=!0){const n=I.useRef(null),r=E(n,{once:t});return{ref:n,isInView:r}}export{v as u};
